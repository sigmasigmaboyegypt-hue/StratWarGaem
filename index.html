<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- BASIC META TAGS -->
    <title>Neon Battle Simulator - Tactical War Game</title>
    <meta name="description" content="Command armies in this tactical battle simulator. Place soldiers, tanks, healers, musketeers, cavalry, and the General hero unit. Watch them fight in real-time!">
    <meta name="keywords" content="battle simulator, strategy game, war game, tactical, units, real-time combat, general hero">
    <meta name="author" content="Neon Battle Simulator">
    
    <!-- OPEN GRAPH (Facebook, Discord, Messenger) -->
    <meta property="og:title" content="Neon Battle Simulator - Tactical War Game">
    <meta property="og:description" content="Command armies with the General hero unit. Form square, circle, line, wedge, and phalanx formations!">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://stratwargaem.pages.dev">
    <meta property="og:image" content="https://stratwargaem.pages.dev/embed-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Neon Battle Simulator with General Hero Unit">
    <meta property="og:site_name" content="Neon Battle Simulator">
    
    <!-- TWITTER CARD -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Neon Battle Simulator - Tactical War Game">
    <meta name="twitter:description" content="Command armies with the General hero unit. Form square, circle, line, wedge, and phalanx formations!">
    <meta name="twitter:image" content="https://stratwargaem.pages.dev/embed-image.png">
    <meta name="twitter:image:alt" content="Neon Battle Simulator screenshot with General">
    
    <!-- DISCORD SPECIFIC -->
    <meta name="theme-color" content="#1a1a2e">
    <meta property="og:video" content="https://stratwargaem.pages.dev">
    <meta property="og:video:type" content="text/html">
    <meta property="og:video:width" content="1280">
    <meta property="og:video:height" content="720">
    
    <!-- FAVICON -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚öîÔ∏è</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚öîÔ∏è</text></svg>">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Mobile Loading Screen -->
    <div class="mobile-loading" id="mobileLoading">
        <div style="font-size: 2rem; margin-bottom: 20px; animation: pulse 1.5s infinite;">‚öîÔ∏è</div>
        <div style="font-size: 1.2rem; margin-bottom: 10px; font-weight: 600;">Loading Battle Simulator...</div>
        <div style="font-size: 0.9rem; color: #aaa; text-align: center; padding: 0 20px; max-width: 300px;">
            Tip: Place units on each side and press Start to begin the battle!
        </div>
    </div>

    <div class="header">
        <h1>Neon Battle Simulator</h1>
        
        <div class="header-controls">
            <!-- Unit Selection Buttons -->
            <div class="unit-controls">
                <button class="unit-btn active" id="placeSoldier" data-type="soldier" data-short="Sol">üë§ Soldier</button>
                <button class="special-btn" id="placeTank" data-type="tank" data-short="Tank">üõ°Ô∏è Tank</button>
                <button class="special-btn" id="placeMusketeer" data-type="musketeer" data-short="Musk">üéØ Musketeer</button>
                <button class="special-btn" id="placeHealer" data-type="healer" data-short="Heal">‚ù§Ô∏è Healer</button>
                <button class="cavalry-btn" id="placeCavalry" data-type="cavalry" data-short="Cav">üêé Cavalry</button>
                <button class="hero-btn" id="placeGeneral" data-type="general" data-short="Gen">üéñÔ∏è General</button>
            </div>
            
            <!-- Game Control Buttons -->
            <div class="game-controls">
                <button class="danger-btn" id="deleteTool" data-short="Del">üóëÔ∏è Delete</button>
                <button class="delete-all-btn" id="deleteAllBtn" data-short="Clear">üî• Delete All</button>
                <button class="control-btn" id="startPauseBtn" data-short="Start">‚ñ∂Ô∏è Start</button>
                <button class="auto-btn" id="autoPlaceBtn" data-short="Auto">ü§ñ Auto Place</button>
                <button class="play-again-header-btn" id="playAgainHeaderBtn" style="display: none;" data-short="Again">üîÅ Play Again</button>
            </div>
        </div>
    </div>

    <!-- General Status Displays -->
    <div class="general-status" id="redGeneralStatus" style="display: none;">
        üéñÔ∏è Red General: <span id="redGeneralCooldown">Ready!</span>
    </div>
    <div class="general-status" id="blueGeneralStatus" style="display: none;">
        üéñÔ∏è Blue General: <span id="blueGeneralCooldown">Ready!</span>
    </div>

    <div class="notification" id="notification">Click to place units</div>

    <div class="main-container">
        <div class="sidebar">
            <!-- Sidebar Tabs -->
            <div class="sidebar-tabs">
                <button class="sidebar-tab active" data-tab="battle-stats">üìä Stats</button>
                <button class="sidebar-tab" data-tab="how-to-play">‚ùì How to Play</button>
                <button class="sidebar-tab" data-tab="unit-info">üìã Unit Info</button>
            </div>
            
            <!-- Battle Statistics Tab (Default) -->
            <div class="sidebar-content active" data-tab="battle-stats">
                <div class="sidebar-section">
                    <h3 class="stats-title">Battle Statistics</h3>
                    <div class="stat-row">
                        <span>üî¥ Red:</span>
                        <span class="red-stat" id="redCount">0</span>
                    </div>
                    <div class="stat-row">
                        <span>üîµ Blue:</span>
                        <span class="blue-stat" id="blueCount">0</span>
                    </div>
                    <div class="stat-row">
                        <span>Total:</span>
                        <span id="totalCount">0</span>
                    </div>
                    <div class="stat-row">
                        <span>‚è±Ô∏è Time:</span>
                        <span class="green-stat" id="battleTime">0s</span>
                    </div>
                    <div class="stat-row">
                        <span>Status:</span>
                        <span id="gameStatus">Paused</span>
                    </div>
                    <div class="stat-row">
                        <span>Kills:</span>
                        <span id="killCount">0</span>
                    </div>
                    <div class="stat-row">
                        <span>Highest Damage:</span>
                        <span id="damageRecord">0</span>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h3>üéñÔ∏è General Status</h3>
                    <div class="stat-row">
                        <span>üî¥ Red General:</span>
                        <span id="redGeneralHealth">Not Placed</span>
                    </div>
                    <div class="stat-row">
                        <span>üîµ Blue General:</span>
                        <span id="blueGeneralHealth">Not Placed</span>
                    </div>
                    <div class="stat-row">
                        <span>Active Formations:</span>
                        <span id="activeFormations">None</span>
                    </div>
                </div>
            </div>
            
            <!-- How to Play Tab -->
            <div class="sidebar-content" data-tab="how-to-play">
                <div class="sidebar-section">
                    <h3 class="how-to-title">‚ùì How to Play</h3>
                    <div class="how-to-content">
                        <div class="instruction">
                            <div class="instruction-icon">üéÆ</div>
                            <div class="instruction-text">
                                <strong>1. Place Units</strong>
                                <p>Click/Tap unit buttons, then click/tap battlefield to place them. Red side = left, Blue side = right.</p>
                            </div>
                        </div>
                        
                        <div class="instruction">
                            <div class="instruction-icon">‚öîÔ∏è</div>
                            <div class="instruction-text">
                                <strong>2. Unit Types</strong>
                                <p>‚Ä¢ üë§ Soldier - Balanced infantry<br>
                                   ‚Ä¢ üõ°Ô∏è Tank - High health, slow<br>
                                   ‚Ä¢ ‚ù§Ô∏è Healer - Heals allies<br>
                                   ‚Ä¢ üéØ Musketeer - Ranged attacker<br>
                                   ‚Ä¢ üêé Cavalry - Fast with charge ability<br>
                                   ‚Ä¢ üéñÔ∏è General - Hero unit (1 per team)</p>
                            </div>
                        </div>
                        
                        <div class="instruction">
                            <div class="instruction-icon">üéñÔ∏è</div>
                            <div class="instruction-text">
                                <strong>3. General - Hero Unit</strong>
                                <p>‚Ä¢ Only ONE per team<br>
                                   ‚Ä¢ 210 HP, 22 Damage<br>
                                   ‚Ä¢ 45s ability cooldown<br>
                                   ‚Ä¢ Commands formations: Square/Circle/Line/Wedge/Phalanx<br>
                                   ‚Ä¢ Inspires nearby allies (+10% damage)<br>
                                   ‚Ä¢ Death causes morale penalty</p>
                            </div>
                        </div>
                        
                        <div class="instruction">
                            <div class="instruction-icon">üöÄ</div>
                            <div class="instruction-text">
                                <strong>4. Start Battle</strong>
                                <p>Click "Start" to begin the simulation. Units will automatically fight. Generals will command formations.</p>
                            </div>
                        </div>
                        
                        <div class="instruction">
                            <div class="instruction-icon">üõ†Ô∏è</div>
                            <div class="instruction-text">
                                <strong>5. Controls</strong>
                                <p>‚Ä¢ üóëÔ∏è Delete - Remove units<br>
                                   ‚Ä¢ üî• Delete All - Clear battlefield<br>
                                   ‚Ä¢ ü§ñ Auto Place - Pre-made armies<br>
                                   ‚Ä¢ ‚è∏Ô∏è/‚ñ∂Ô∏è - Pause/Resume battle<br>
                                   ‚Ä¢ üîÅ Play Again - Reset game</p>
                            </div>
                        </div>
                        
                        <div class="instruction">
                            <div class="instruction-icon">üéØ</div>
                            <div class="instruction-text">
                                <strong>6. Strategy Tips</strong>
                                <p>‚Ä¢ Mix unit types for balanced army<br>
                                   ‚Ä¢ Healers behind front lines<br>
                                   ‚Ä¢ Use cavalry for flanking attacks<br>
                                   ‚Ä¢ Tanks as damage absorbers<br>
                                   ‚Ä¢ Protect your General at all costs<br>
                                   ‚Ä¢ Time formations with enemy attacks</p>
                            </div>
                        </div>
                        
                        <div class="instruction" style="background: rgba(52, 152, 219, 0.1);">
                            <div class="instruction-icon">üì±</div>
                            <div class="instruction-text">
                                <strong>Mobile Tips</strong>
                                <p>‚Ä¢ Tap buttons to select units<br>
                                   ‚Ä¢ Tap battlefield to place<br>
                                   ‚Ä¢ Use Auto Place for quick setup<br>
                                   ‚Ä¢ Rotate device for different views<br>
                                   ‚Ä¢ One General per team maximum</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Unit Information Tab -->
            <div class="sidebar-content" data-tab="unit-info">
                <div class="sidebar-section">
                    <h3 class="unit-info-title">üìã Unit Information</h3>
                    
                    <div class="unit-tabs">
                        <button class="unit-tab active" data-unit="soldier">üë§ Soldier</button>
                        <button class="unit-tab" data-unit="tank">üõ°Ô∏è Tank</button>
                        <button class="unit-tab" data-unit="healer">‚ù§Ô∏è Healer</button>
                        <button class="unit-tab" data-unit="musketeer">üéØ Musketeer</button>
                        <button class="unit-tab" data-unit="cavalry">üêé Cavalry</button>
                        <button class="unit-tab" data-unit="general">üéñÔ∏è General</button>
                    </div>
                    
                    <div class="unit-details">
                        <!-- Soldier Info (Default) -->
                        <div class="unit-detail active" data-unit="soldier">
                            <div class="unit-stat">
                                <span>Health:</span>
                                <span class="stat-value">100</span>
                            </div>
                            <div class="unit-stat">
                                <span>Damage:</span>
                                <span class="stat-value">11</span>
                            </div>
                            <div class="unit-stat">
                                <span>Speed:</span>
                                <span class="stat-value">High</span>
                            </div>
                            <div class="unit-stat">
                                <span>Attack Speed:</span>
                                <span class="stat-value">Fast</span>
                            </div>
                            <div class="unit-desc">
                                Balanced infantry unit. Good all-around combatant. Perfect for frontline combat.
                            </div>
                        </div>
                        
                        <!-- Tank Info -->
                        <div class="unit-detail" data-unit="tank">
                            <div class="unit-stat">
                                <span>Health:</span>
                                <span class="stat-value">200</span>
                            </div>
                            <div class="unit-stat">
                                <span>Damage:</span>
                                <span class="stat-value">19</span>
                            </div>
                            <div class="unit-stat">
                                <span>Speed:</span>
                                <span class="stat-value">Slow</span>
                            </div>
                            <div class="unit-stat">
                                <span>Attack Speed:</span>
                                <span class="stat-value">Slow</span>
                            </div>
                            <div class="unit-desc">
                                Heavy armored unit. High health and damage but slow movement. Best as a damage absorber.
                            </div>
                        </div>
                        
                        <!-- Healer Info -->
                        <div class="unit-detail" data-unit="healer">
                            <div class="unit-stat">
                                <span>Health:</span>
                                <span class="stat-value">80</span>
                            </div>
                            <div class="unit-stat">
                                <span>Heal Power:</span>
                                <span class="stat-value">6</span>
                            </div>
                            <div class="unit-stat">
                                <span>Speed:</span>
                                <span class="stat-value">Medium</span>
                            </div>
                            <div class="unit-stat">
                                <span>Heal Range:</span>
                                <span class="stat-value">60</span>
                            </div>
                            <div class="unit-desc">
                                Support unit. Heals allies automatically. Keep behind front lines for maximum effectiveness.
                            </div>
                        </div>
                        
                        <!-- Musketeer Info -->
                        <div class="unit-detail" data-unit="musketeer">
                            <div class="unit-stat">
                                <span>Health:</span>
                                <span class="stat-value">60</span>
                            </div>
                            <div class="unit-stat">
                                <span>Damage:</span>
                                <span class="stat-value">25</span>
                            </div>
                            <div class="unit-stat">
                                <span>Range:</span>
                                <span class="stat-value">150</span>
                            </div>
                            <div class="unit-stat">
                                <span>Miss Chance:</span>
                                <span class="stat-value">35%</span>
                            </div>
                            <div class="unit-desc">
                                Ranged attacker. High damage but can miss. Switches to bayonet when enemies get close.
                            </div>
                        </div>
                        
                        <!-- Cavalry Info -->
                        <div class="unit-detail" data-unit="cavalry">
                            <div class="unit-stat">
                                <span>Health:</span>
                                <span class="stat-value">120</span>
                            </div>
                            <div class="unit-stat">
                                <span>Damage:</span>
                                <span class="stat-value">16</span>
                            </div>
                            <div class="unit-stat">
                                <span>Speed:</span>
                                <span class="stat-value">Very High</span>
                            </div>
                            <div class="unit-stat">
                                <span>Charge Cooldown:</span>
                                <span class="stat-value">25s</span>
                            </div>
                            <div class="unit-desc">
                                Fast cavalry with charge ability. Great for flanking and disrupting enemy formations.
                            </div>
                        </div>
                        
                        <!-- General Info -->
                        <div class="unit-detail" data-unit="general">
                            <div class="unit-stat">
                                <span>Health:</span>
                                <span class="stat-value">210</span>
                            </div>
                            <div class="unit-stat">
                                <span>Damage:</span>
                                <span class="stat-value">22</span>
                            </div>
                            <div class="unit-stat">
                                <span>Ability Cooldown:</span>
                                <span class="stat-value">45s</span>
                            </div>
                            <div class="unit-stat">
                                <span>Aura Damage Boost:</span>
                                <span class="stat-value">+10%</span>
                            </div>
                            <div class="unit-stat">
                                <span>Command Range:</span>
                                <span class="stat-value">150</span>
                            </div>
                            <div class="unit-desc">
                                Hero unit (limit: 1 per team). Inspires nearby allies (+10% damage). 
                                Can command formations every 45 seconds: Square (vs cavalry), Circle (surrounded), 
                                Line (standard), Wedge (attack), Phalanx (defense). His death demoralizes allies.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="game-area">
            <canvas id="gameCanvas"></canvas>
        </div>
    </div>

    <div class="modal" id="gameOverModal">
        <div class="modal-content">
            <h2>üèÜ VICTORY!</h2>
            <div id="winnerText" class="winner-text">Red Team Victory!</div>
            <div id="battleStats">
                ‚è±Ô∏è Battle lasted: <span id="finalTime">0</span> seconds<br>
                üë• Remaining units: <span id="remainingUnits">0</span><br>
                ‚öîÔ∏è Total kills: <span id="totalKills">0</span><br>
                üí• Highest damage: <span id="highestDamage">0</span><br>
                üéñÔ∏è General alive: <span id="generalAlive">No</span>
            </div>
            <div class="play-again-container">
                <button class="play-again-btn" id="playAgainBtn">
                    üîÑ PLAY AGAIN
                </button>
            </div>
        </div>
    </div>

    <!-- Mobile Help Button -->
    <button class="mobile-help-btn" id="mobileHelpBtn" title="Quick Help">‚ùì</button>

    <!-- Game logic -->
    <script src="script.js"></script>
    <!-- How to Play tab functionality -->
    <script src="howtoplay.js"></script>
    
    <!-- Mobile-specific enhancements -->
    <script>
    // Hide loading screen when game is ready
    document.addEventListener('DOMContentLoaded', function() {
        setTimeout(() => {
            const loading = document.getElementById('mobileLoading');
            if (loading) loading.style.display = 'none';
        }, 800);
        
        // Initialize mobile help button
        const mobileHelpBtn = document.getElementById('mobileHelpBtn');
        if (mobileHelpBtn) {
            mobileHelpBtn.addEventListener('click', function() {
                const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
                const message = isMobile 
                    ? 'üïπÔ∏è MOBILE CONTROLS:\n\n‚Ä¢ Tap unit buttons to select\n‚Ä¢ Tap battlefield to place\n‚Ä¢ Use "Auto Place" for quick setup\n‚Ä¢ "Start" begins the battle\n‚Ä¢ Rotate device for different views\n\nüéñÔ∏è GENERAL UNIT:\n‚Ä¢ Only 1 per team\n‚Ä¢ Commands formations (45s cooldown)\n‚Ä¢ +10% damage aura to nearby allies\n‚Ä¢ Death demoralizes your army'
                    : 'üéÆ DESKTOP CONTROLS:\n\n‚Ä¢ Click unit buttons to select\n‚Ä¢ Click battlefield to place\n‚Ä¢ Use "Auto Place" for balanced armies\n‚Ä¢ "Start" begins the simulation\n‚Ä¢ Watch tactical combat unfold\n\nüéñÔ∏è GENERAL UNIT:\n‚Ä¢ Only 1 per team\n‚Ä¢ Commands formations (45s cooldown)\n‚Ä¢ +10% damage aura to nearby allies\n‚Ä¢ Death demoralizes your army';
                
                alert(message);
            });
            
            // Only show on mobile
            if (!/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
                mobileHelpBtn.style.display = 'none';
            }
        }
        
        // Add touch feedback to buttons
        const buttons = document.querySelectorAll('button');
        buttons.forEach(btn => {
            btn.addEventListener('touchstart', function() {
                this.style.transform = 'scale(0.95)';
            });
            
            btn.addEventListener('touchend', function() {
                this.style.transform = '';
            });
        });
        
        // Prevent accidental zooming on canvas
        const canvas = document.getElementById('gameCanvas');
        if (canvas) {
            canvas.addEventListener('touchstart', function(e) {
                if (e.touches.length > 1) {
                    e.preventDefault();
                }
            }, { passive: false });
            
            canvas.addEventListener('touchmove', function(e) {
                if (e.touches.length > 1) {
                    e.preventDefault();
                }
            }, { passive: false });
        }
    });
    
    // Detect device type for analytics/optimization
    window.isMobileDevice = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
    window.isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
    
    if (window.isMobileDevice) {
        console.log('Neon Battle Simulator: Mobile mode activated');
        document.body.classList.add('mobile-device');
    }
    </script>
    
    <!-- EMBED SCRIPT FOR DISCORD/MESSENGER -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "VideoGame",
        "name": "Neon Battle Simulator",
        "description": "Command armies with the General hero unit. Place soldiers, tanks, healers, musketeers, and cavalry. Watch them fight in real-time with tactical formations!",
        "url": "https://stratwargaem.pages.dev",
        "applicationCategory": "Game",
        "genre": ["Strategy", "Simulation", "Tactical"],
        "playMode": "SinglePlayer",
        "author": {
            "@type": "Person",
            "name": "Neon Battle Simulator"
        },
        "screenshot": "https://stratwargaem.pages.dev/embed-image.png",
        "contentRating": "E",
        "keywords": "battle simulator, strategy game, war game, tactical, general hero, real-time combat, formations",
        "operatingSystem": "Web Browser",
        "device": "Desktop, Mobile, Tablet"
    }
    </script>
</body>
</html>
